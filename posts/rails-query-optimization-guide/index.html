<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" >
  <!-- The Head -->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  >

  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FE2138048G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FE2138048G');
</script>


  

  

  
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Rails Query Optimization guide" />
<meta property="og:locale" content="en" />
<meta name="description" content="Rails Query Optimization: Complete Guide to Database Performance" />
<meta property="og:description" content="Rails Query Optimization: Complete Guide to Database Performance" />
<link rel="canonical" href="http://shivrajbadu.com.np/posts/rails-query-optimization-guide/" />
<meta property="og:url" content="http://shivrajbadu.com.np/posts/rails-query-optimization-guide/" />
<meta property="og:site_name" content="Let’s code" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-07-31T05:31:00+05:45" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Rails Query Optimization guide" />
<meta name="twitter:site" content="@shivrajbadu" />
<meta name="google-site-verification" content="1V6mjFi-H5goXTGWpdsB7z6Mcve5NUvIpvzaQJGxOtA# fill in to your verification string" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-07-31T05:31:00+05:45","datePublished":"2025-07-31T05:31:00+05:45","description":"Rails Query Optimization: Complete Guide to Database Performance","headline":"Rails Query Optimization guide","mainEntityOfPage":{"@type":"WebPage","@id":"http://shivrajbadu.com.np/posts/rails-query-optimization-guide/"},"url":"http://shivrajbadu.com.np/posts/rails-query-optimization-guide/"}</script>
<!-- End Jekyll SEO tag -->

  

  <title>Rails Query Optimization guide | Let's code
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicons/site.webmanifest">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Let's code">
<meta name="application-name" content="Let's code">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin>
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
    

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">
  

  <!-- GA -->
  

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css">

  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.3/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Manific Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css">
  

  <!-- JavaScript -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-6361630351328078",
        enable_page_level_ads: true
    });
  </script>  
  <script async src="https://fundingchoicesmessages.google.com/i/pub-6361630351328078?ers=1" nonce="g4MyGBz15HP-B7XHadZyyQ"></script><script nonce="g4MyGBz15HP-B7XHadZyyQ">(function() {function signalGooglefcPresent() {if (!window.frames['googlefcPresent']) {if (document.body) {const iframe = document.createElement('iframe'); iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;'; iframe.style.display = 'none'; iframe.name = 'googlefcPresent'; document.body.appendChild(iframe);} else {setTimeout(signalGooglefcPresent, 0);}}}signalGooglefcPresent();})();</script>

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      if (this.hasMode) {
        if (this.isDarkMode) {
          if (!this.isSysDarkPrefer) {
            this.setDark();
          }
        } else {
          if (this.isSysDarkPrefer) {
            this.setLight();
          }
        }
      }

      let self = this;

      /* always follow the system prefers */
      this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          if (self.isDarkMode) {
            if (!self.isSysDarkPrefer) {
              self.setDark();
            }
          } else {
            if (self.isSysDarkPrefer) {
              self.setLight();
            }
          }

          self.clearMode();
        }

        self.notify();
      });
    } /* constructor() */

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isSysDarkPrefer() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get isLightMode() {
      return this.mode === ModeToggle.LIGHT_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }

    /* get the current mode on screen */
    get modeStatus() {
      if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) {
        return ModeToggle.DARK_MODE;
      } else {
        return ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }

    /* Notify another plugins that the theme mode has changed */
    notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        if (this.isSysDarkPrefer) {
          if (this.isLightMode) {
            this.clearMode();
          } else {
            this.setLight();
          }
        } else {
          if (this.isDarkMode) {
            this.clearMode();
          } else {
            this.setDark();
          }
        }
      } else {
        if (this.isSysDarkPrefer) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    } /* flipMode() */
  } /* ModeToggle */

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->


</head>

  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle">
      
        
        <img src="/assets/img/profile.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'">
      
    </a>

    <h1 class="site-title">
      <a href="/">Let's code</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">Dive into the World of Code - Exploring Various Programming Languages</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/privacy/" class="nav-link">
            <i class="fa-fw fas fa-lock"></i>
            

            <span>PRIVACY POLICY</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="mode-toggle btn" aria-label="Switch Mode">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/userrails"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/shivrajbadu"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="https://www.linkedin.com/in/shiv-raj-badu-640b2661"
          aria-label="linkedin"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-linkedin"></i>
        </a>
      
    
      

      
        <a
          href="https://stackoverflow.com/users/2606967/siv-rj"
          aria-label="stack-overflow"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-stack-overflow"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['shivrajbadu','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">
                Home
              </a>
            </span>

          
        
          
        
          
            
              <span>Rails Query Optimization guide</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->





<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>Rails Query Optimization guide</h1>

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1753919160"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Jul 31, 2025
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://twitter.com/shivrajbadu">Shivraj Badu</a>
            
          </em>
        </span>

        <!-- read time -->
        <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="2797 words"
>
  <em>15 min</em> read</span>

      </div>
      <!-- .d-flex -->
    </div>
    <!-- .post-meta -->
  </header>

  <div class="content">
    <h1 id="rails-query-optimization-complete-guide-to-database-performance">Rails Query Optimization: Complete Guide to Database Performance</h1>

<p>Database query optimization is the cornerstone of building high-performance Ruby on Rails applications. Poor query patterns can transform a responsive application into a sluggish, resource-hungry system that frustrates users and drains infrastructure budgets. This comprehensive guide explores proven techniques, advanced strategies, and modern tools to optimize your Rails queries for maximum performance.</p>

<h2 id="why-query-optimization-matters"><span class="me-2">Why Query Optimization Matters</span><a href="#why-query-optimization-matters" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="performance-impact"><span class="me-2">Performance Impact</span><a href="#performance-impact" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>Optimized queries directly translate to faster response times, reduced server load, and improved user experience. A single poorly written query can increase page load times from milliseconds to seconds.</p>

<h3 id="cost-efficiency"><span class="me-2">Cost Efficiency</span><a href="#cost-efficiency" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>Efficient queries minimize database resource consumption, reducing infrastructure costs. By specifying the exact columns you require, you minimize the data transferred between the database and your Ruby on Rails application, leading to significant cost savings in cloud environments.</p>

<h3 id="scalability-foundation"><span class="me-2">Scalability Foundation</span><a href="#scalability-foundation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>Well-optimized queries ensure your application scales gracefully as data volume grows, preventing performance degradation that often forces expensive infrastructure upgrades.</p>

<h2 id="understanding-active-record-query-fundamentals"><span class="me-2">Understanding Active Record Query Fundamentals</span><a href="#understanding-active-record-query-fundamentals" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Active Record provides an elegant interface for database operations, but its convenience can mask performance implications. Understanding how your Ruby code translates to SQL is essential for optimization.</p>

<h3 id="the-hidden-cost-of-convenience"><span class="me-2">The Hidden Cost of Convenience</span><a href="#the-hidden-cost-of-convenience" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="c1"># This innocent-looking code can be expensive</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">all</span>
<span class="n">users</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">user</span><span class="p">.</span><span class="nf">name</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>This pattern loads all user records into memory, which becomes problematic as your user base grows.</p>

<h2 id="core-optimization-techniques"><span class="me-2">Core Optimization Techniques</span><a href="#core-optimization-techniques" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="1-selecting-only-required-data"><span class="me-2">1. Selecting Only Required Data</span><a href="#1-selecting-only-required-data" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>One of the most impactful optimizations is retrieving only necessary columns.</p>

<p><strong>Problem:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="c1"># Loads all columns, including potentially large text fields</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">all</span>
<span class="n">users</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">user</span><span class="p">.</span><span class="nf">name</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Solution:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1"># Loads only the name column, reducing memory usage significantly</span>
<span class="n">names</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">pluck</span><span class="p">(</span><span class="ss">:name</span><span class="p">)</span>

<span class="c1"># For multiple columns while maintaining Active Record objects</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:email</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>When to use <code class="language-plaintext highlighter-rouge">.pluck</code> vs <code class="language-plaintext highlighter-rouge">.select</code>:</strong></p>
<ul>
  <li>Use <code class="language-plaintext highlighter-rouge">.pluck</code> when you need raw values and don’t require Active Record methods</li>
  <li>Use <code class="language-plaintext highlighter-rouge">.select</code> when you need Active Record objects but want to limit columns</li>
</ul>

<h3 id="2-mastering-eager-loading-to-eliminate-n1-queries"><span class="me-2">2. Mastering Eager Loading to Eliminate N+1 Queries</span><a href="#2-mastering-eager-loading-to-eliminate-n1-queries" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>N+1 queries are among the most common performance killers in Rails applications.</p>

<p><strong>The N+1 Problem:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1"># This creates 1 + N queries (1 for users, N for each user's posts)</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">all</span>
<span class="n">users</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2"> has </span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">posts</span><span class="p">.</span><span class="nf">count</span><span class="si">}</span><span class="s2"> posts"</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Solutions:</strong></p>

<h4 id="using-includes-smart-loading"><span class="me-2">Using <code class="language-plaintext highlighter-rouge">.includes</code> (Smart Loading)</span><a href="#using-includes-smart-loading" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1"># Rails chooses the best loading strategy automatically</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:posts</span><span class="p">)</span>
<span class="n">users</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2"> has </span><span class="si">#{</span><span class="n">user</span><span class="p">.</span><span class="nf">posts</span><span class="p">.</span><span class="nf">size</span><span class="si">}</span><span class="s2"> posts"</span> <span class="c1"># Uses .size, not .count</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="using-preload-separate-queries"><span class="me-2">Using <code class="language-plaintext highlighter-rouge">.preload</code> (Separate Queries)</span><a href="#using-preload-separate-queries" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c1"># Forces separate queries - better for memory usage</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">preload</span><span class="p">(</span><span class="ss">:posts</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="using-eager_load-left-join"><span class="me-2">Using <code class="language-plaintext highlighter-rouge">.eager_load</code> (LEFT JOIN)</span><a href="#using-eager_load-left-join" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c1"># Forces a single LEFT JOIN query - better when you need to add conditions</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">eager_load</span><span class="p">(</span><span class="ss">:posts</span><span class="p">).</span><span class="nf">where</span><span class="p">(</span><span class="ss">posts: </span><span class="p">{</span> <span class="ss">published: </span><span class="kp">true</span> <span class="p">})</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Key Differences:</strong></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">preload</code> initiates two queries, the first to fetch the primary model and the second to fetch associated models whereas <code class="language-plaintext highlighter-rouge">eager_load</code> does a left join which initiates one query to fetch both primary and associated models</li>
  <li><code class="language-plaintext highlighter-rouge">includes</code> - By default works like preload, but in some cases it will behave like eager_load, normally when you are also adding some conditions to the query</li>
</ul>

<h3 id="3-efficient-batch-processing"><span class="me-2">3. Efficient Batch Processing</span><a href="#3-efficient-batch-processing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>When processing large datasets, loading all records into memory can cause performance issues and memory exhaustion.</p>

<p><strong>Problem:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1"># Loads all users into memory at once</span>
<span class="no">User</span><span class="p">.</span><span class="nf">all</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
  <span class="no">UserMailer</span><span class="p">.</span><span class="nf">newsletter</span><span class="p">(</span><span class="n">user</span><span class="p">).</span><span class="nf">deliver_now</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Solution:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="c1"># Processes users in batches of 1000 (default)</span>
<span class="no">User</span><span class="p">.</span><span class="nf">find_each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
  <span class="no">UserMailer</span><span class="p">.</span><span class="nf">newsletter</span><span class="p">(</span><span class="n">user</span><span class="p">).</span><span class="nf">deliver_now</span>
<span class="k">end</span>

<span class="c1"># Custom batch size</span>
<span class="no">User</span><span class="p">.</span><span class="nf">find_each</span><span class="p">(</span><span class="ss">batch_size: </span><span class="mi">500</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
  <span class="c1"># Process user</span>
<span class="k">end</span>

<span class="c1"># For batch processing with array access</span>
<span class="no">User</span><span class="p">.</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="ss">batch_size: </span><span class="mi">1000</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">batch</span><span class="o">|</span>
  <span class="n">batch</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="n">process_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="4-smart-existence-checks"><span class="me-2">4. Smart Existence Checks</span><a href="#4-smart-existence-checks" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Checking for record existence efficiently can significantly impact performance.</p>

<p><strong>Inefficient:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1"># Loads the entire object just to check existence</span>
<span class="k">if</span> <span class="no">User</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">email: </span><span class="s1">'test@example.com'</span><span class="p">).</span><span class="nf">present?</span>
  <span class="c1"># Handle existing user</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Efficient:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1"># Only checks existence without loading the object</span>
<span class="k">if</span> <span class="no">User</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">email: </span><span class="s1">'test@example.com'</span><span class="p">).</span><span class="nf">exists?</span>
  <span class="c1"># Handle existing user</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="5-strategic-database-indexing"><span class="me-2">5. Strategic Database Indexing</span><a href="#5-strategic-database-indexing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Indexes are crucial for query performance, especially on frequently queried columns.</p>

<p><strong>Basic Index Creation:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c1"># In a migration</span>
<span class="k">class</span> <span class="nc">AddIndexToUsers</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">7.0</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">add_index</span> <span class="ss">:users</span><span class="p">,</span> <span class="ss">:email</span>
    <span class="n">add_index</span> <span class="ss">:users</span><span class="p">,</span> <span class="ss">:created_at</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Composite Indexes:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="c1"># For queries that filter on multiple columns</span>
<span class="n">add_index</span> <span class="ss">:users</span><span class="p">,</span> <span class="p">[</span><span class="ss">:active</span><span class="p">,</span> <span class="ss">:created_at</span><span class="p">]</span>
<span class="n">add_index</span> <span class="ss">:posts</span><span class="p">,</span> <span class="p">[</span><span class="ss">:user_id</span><span class="p">,</span> <span class="ss">:published_at</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Partial Indexes:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c1"># Index only active users</span>
<span class="n">add_index</span> <span class="ss">:users</span><span class="p">,</span> <span class="ss">:email</span><span class="p">,</span> <span class="ss">where: </span><span class="s2">"active = true"</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>When to Add Indexes:</strong></p>
<ul>
  <li>Columns used in <code class="language-plaintext highlighter-rouge">WHERE</code> clauses</li>
  <li>Foreign keys for associations</li>
  <li>Columns used in <code class="language-plaintext highlighter-rouge">ORDER BY</code> and <code class="language-plaintext highlighter-rouge">GROUP BY</code></li>
  <li>Frequently joined columns</li>
</ul>

<h2 id="advanced-optimization-strategies"><span class="me-2">Advanced Optimization Strategies</span><a href="#advanced-optimization-strategies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="1-query-caching-with-railscache"><span class="me-2">1. Query Caching with Rails.cache</span><a href="#1-query-caching-with-railscache" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Caching expensive query results can dramatically improve performance for frequently accessed data.</p>

<p><strong>Basic Query Caching:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">featured_posts</span>
  <span class="no">Rails</span><span class="p">.</span><span class="nf">cache</span><span class="p">.</span><span class="nf">fetch</span><span class="p">(</span><span class="s1">'featured_posts'</span><span class="p">,</span> <span class="ss">expires_in: </span><span class="mi">1</span><span class="p">.</span><span class="nf">hour</span><span class="p">)</span> <span class="k">do</span>
    <span class="no">Post</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:author</span><span class="p">,</span> <span class="ss">:tags</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">featured: </span><span class="kp">true</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">order</span><span class="p">(</span><span class="ss">created_at: :desc</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">to_a</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Cache Invalidation:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">after_save</span> <span class="ss">:clear_featured_cache</span>
  <span class="n">after_destroy</span> <span class="ss">:clear_featured_cache</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">clear_featured_cache</span>
    <span class="no">Rails</span><span class="p">.</span><span class="nf">cache</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s1">'featured_posts'</span><span class="p">)</span> <span class="k">if</span> <span class="n">featured?</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Dynamic Cache Keys:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">user_posts</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
  <span class="n">cache_key</span> <span class="o">=</span> <span class="s2">"user_posts/</span><span class="si">#{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="no">User</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">user_id</span><span class="p">).</span><span class="nf">updated_at</span><span class="p">.</span><span class="nf">to_i</span><span class="si">}</span><span class="s2">"</span>
  <span class="no">Rails</span><span class="p">.</span><span class="nf">cache</span><span class="p">.</span><span class="nf">fetch</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="ss">expires_in: </span><span class="mi">30</span><span class="p">.</span><span class="nf">minutes</span><span class="p">)</span> <span class="k">do</span>
    <span class="no">User</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">user_id</span><span class="p">).</span><span class="nf">posts</span><span class="p">.</span><span class="nf">published</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:tags</span><span class="p">).</span><span class="nf">to_a</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="2-memoization-for-request-level-caching"><span class="me-2">2. Memoization for Request-Level Caching</span><a href="#2-memoization-for-request-level-caching" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Memoization prevents redundant queries within a single request cycle.</p>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">PostsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">featured_posts</span>
    <span class="vi">@featured_posts</span> <span class="o">||=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">featured</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:author</span><span class="p">).</span><span class="nf">limit</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">popular_tags</span>
    <span class="vi">@popular_tags</span> <span class="o">||=</span> <span class="no">Tag</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:posts</span><span class="p">)</span>
                         <span class="p">.</span><span class="nf">group</span><span class="p">(</span><span class="s1">'tags.id'</span><span class="p">)</span>
                         <span class="p">.</span><span class="nf">order</span><span class="p">(</span><span class="s1">'COUNT(posts.id) DESC'</span><span class="p">)</span>
                         <span class="p">.</span><span class="nf">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="3-counter-caches-for-association-counts"><span class="me-2">3. Counter Caches for Association Counts</span><a href="#3-counter-caches-for-association-counts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Counter caches eliminate the need for expensive <code class="language-plaintext highlighter-rouge">COUNT</code> queries.</p>

<p><strong>Setup:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="c1"># In the migration</span>
<span class="k">class</span> <span class="nc">AddPostsCountToUsers</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">7.0</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">add_column</span> <span class="ss">:users</span><span class="p">,</span> <span class="ss">:posts_count</span><span class="p">,</span> <span class="ss">:integer</span><span class="p">,</span> <span class="ss">default: </span><span class="mi">0</span>
    
    <span class="c1"># Reset existing counts</span>
    <span class="no">User</span><span class="p">.</span><span class="nf">reset_counters</span><span class="p">(</span><span class="ss">:posts</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># In the model</span>
<span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">belongs_to</span> <span class="ss">:user</span><span class="p">,</span> <span class="ss">counter_cache: </span><span class="kp">true</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">has_many</span> <span class="ss">:posts</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Usage:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1"># Instead of this expensive query</span>
<span class="n">user</span><span class="p">.</span><span class="nf">posts</span><span class="p">.</span><span class="nf">count</span> <span class="c1"># Triggers COUNT query</span>

<span class="c1"># Use the cached counter</span>
<span class="n">user</span><span class="p">.</span><span class="nf">posts_count</span> <span class="c1"># No database query</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Custom Counter Cache Names:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Comment</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">belongs_to</span> <span class="ss">:post</span><span class="p">,</span> <span class="ss">counter_cache: :comments_count</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="4-understanding-joins-vs-includes"><span class="me-2">4. Understanding Joins vs Includes</span><a href="#4-understanding-joins-vs-includes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Different loading strategies serve different purposes and have distinct performance characteristics.</p>

<p><strong>Inner Join with <code class="language-plaintext highlighter-rouge">.joins</code>:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c1"># Only loads users who have posts, single query</span>
<span class="n">users_with_posts</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:posts</span><span class="p">).</span><span class="nf">distinct</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Left Join with <code class="language-plaintext highlighter-rouge">.left_joins</code>:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c1"># Loads all users, including those without posts</span>
<span class="n">all_users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">left_joins</span><span class="p">(</span><span class="ss">:posts</span><span class="p">).</span><span class="nf">distinct</span>
</pre></td></tr></tbody></table></code></div></div>

<p><strong>Combining Strategies:</strong></p>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1"># Efficient: Join to filter, then eager load associations</span>
<span class="n">active_users_with_data</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:posts</span><span class="p">)</span>
                             <span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">posts: </span><span class="p">{</span> <span class="ss">published: </span><span class="kp">true</span> <span class="p">})</span>
                             <span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:profile</span><span class="p">,</span> <span class="ss">:posts</span><span class="p">)</span>
                             <span class="p">.</span><span class="nf">distinct</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="performance-monitoring-and-detection-tools"><span class="me-2">Performance Monitoring and Detection Tools</span><a href="#performance-monitoring-and-detection-tools" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="1-development-tools"><span class="me-2">1. Development Tools</span><a href="#1-development-tools" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<h4 id="bullet-gem---n1-query-detection"><span class="me-2">Bullet Gem - N+1 Query Detection</span><a href="#bullet-gem---n1-query-detection" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c1"># Gemfile</span>
<span class="n">group</span> <span class="ss">:development</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'bullet'</span>
<span class="k">end</span>

<span class="c1"># config/environments/development.rb</span>
<span class="n">config</span><span class="p">.</span><span class="nf">after_initialize</span> <span class="k">do</span>
  <span class="no">Bullet</span><span class="p">.</span><span class="nf">enable</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="no">Bullet</span><span class="p">.</span><span class="nf">alert</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="no">Bullet</span><span class="p">.</span><span class="nf">bullet_logger</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="no">Bullet</span><span class="p">.</span><span class="nf">rails_logger</span> <span class="o">=</span> <span class="kp">true</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="prosopite---lightweight-alternative"><span class="me-2">Prosopite - Lightweight Alternative</span><a href="#prosopite---lightweight-alternative" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c1"># Gemfile</span>
<span class="n">group</span> <span class="ss">:development</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'prosopite'</span>
<span class="k">end</span>

<span class="c1"># Configuration</span>
<span class="no">Prosopite</span><span class="p">.</span><span class="nf">finish</span> <span class="o">=</span> <span class="kp">true</span>
<span class="no">Prosopite</span><span class="p">.</span><span class="nf">rails_logger</span> <span class="o">=</span> <span class="kp">true</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="rack-mini-profiler---real-time-performance"><span class="me-2">Rack Mini Profiler - Real-time Performance</span><a href="#rack-mini-profiler---real-time-performance" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1"># Gemfile</span>
<span class="n">gem</span> <span class="s1">'rack-mini-profiler'</span>

<span class="c1"># Shows performance overlay in browser</span>
<span class="c1"># Identifies slow queries and memory usage automatically</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="2-production-monitoring"><span class="me-2">2. Production Monitoring</span><a href="#2-production-monitoring" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<h4 id="scoutapm---comprehensive-performance-tracking"><span class="me-2">ScoutAPM - Comprehensive Performance Tracking</span><a href="#scoutapm---comprehensive-performance-tracking" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c1"># Gemfile</span>
<span class="n">gem</span> <span class="s1">'scout_apm'</span>

<span class="c1"># Provides:</span>
<span class="c1"># - SQL query breakdown with execution times</span>
<span class="c1"># - Historical performance trends  </span>
<span class="c1"># - Memory leak detection</span>
<span class="c1"># - Endpoint-specific analysis</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="skylight---query-performance-insights"><span class="me-2">Skylight - Query Performance Insights</span><a href="#skylight---query-performance-insights" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c1"># Gemfile  </span>
<span class="n">gem</span> <span class="s1">'skylight'</span>

<span class="c1"># Features:</span>
<span class="c1"># - Endpoint-specific query analysis</span>
<span class="c1"># - Detailed timing breakdowns</span>
<span class="c1"># - Historical performance metrics</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="3-query-analysis-and-memory-profiling"><span class="me-2">3. Query Analysis and Memory Profiling</span><a href="#3-query-analysis-and-memory-profiling" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<h4 id="explain-for-query-analysis"><span class="me-2">EXPLAIN for Query Analysis</span><a href="#explain-for-query-analysis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c1"># Analyze execution plans</span>
<span class="nb">puts</span> <span class="no">User</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:posts</span><span class="p">).</span><span class="nf">where</span><span class="p">(</span><span class="ss">active: </span><span class="kp">true</span><span class="p">).</span><span class="nf">explain</span>

<span class="c1"># Look for:</span>
<span class="c1"># - "Using index" (good) vs "Using filesort" (add index)</span>
<span class="c1"># - High row counts (optimize query)</span>
<span class="c1"># - "Using temporary" (refactor complex queries)</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="memory-profiler-for-leak-detection"><span class="me-2">Memory Profiler for Leak Detection</span><a href="#memory-profiler-for-leak-detection" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="c1"># Gemfile</span>
<span class="n">gem</span> <span class="s1">'memory_profiler'</span>

<span class="c1"># Usage</span>
<span class="nb">require</span> <span class="s1">'memory_profiler'</span>
<span class="n">report</span> <span class="o">=</span> <span class="no">MemoryProfiler</span><span class="p">.</span><span class="nf">report</span> <span class="k">do</span>
  <span class="no">Post</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:comments</span><span class="p">,</span> <span class="ss">:tags</span><span class="p">).</span><span class="nf">limit</span><span class="p">(</span><span class="mi">100</span><span class="p">).</span><span class="nf">to_a</span>
<span class="k">end</span>
<span class="n">report</span><span class="p">.</span><span class="nf">pretty_print</span>

<span class="c1"># Analyze output for high Active Record allocations</span>
</pre></td></tr></tbody></table></code></div></div>

<h4 id="batch-processing-for-memory-efficiency"><span class="me-2">Batch Processing for Memory Efficiency</span><a href="#batch-processing-for-memory-efficiency" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c1"># Bad - loads all into memory</span>
<span class="no">User</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:posts</span><span class="p">).</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="n">process_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="p">}</span>

<span class="c1"># Good - processes in batches</span>
<span class="no">User</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:posts</span><span class="p">).</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="ss">batch_size: </span><span class="mi">100</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">batch</span><span class="o">|</span>
  <span class="n">batch</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="n">process_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>

<span class="c1"># Even better - select only needed columns</span>
<span class="no">User</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:name</span><span class="p">).</span><span class="nf">find_each</span> <span class="p">{</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="n">process_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="advanced-indexing-strategies"><span class="me-2">Advanced Indexing Strategies</span><a href="#advanced-indexing-strategies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="1-composite-indexes"><span class="me-2">1. Composite Indexes</span><a href="#1-composite-indexes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Multi-column indexes optimize queries filtering on multiple columns. Place the most selective column first.</p>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c1"># Migration</span>
<span class="n">add_index</span> <span class="ss">:orders</span><span class="p">,</span> <span class="p">[</span><span class="ss">:user_id</span><span class="p">,</span> <span class="ss">:created_at</span><span class="p">]</span>
<span class="n">add_index</span> <span class="ss">:posts</span><span class="p">,</span> <span class="p">[</span><span class="ss">:user_id</span><span class="p">,</span> <span class="ss">:status</span><span class="p">,</span> <span class="ss">:published_at</span><span class="p">]</span>

<span class="c1"># Optimizes queries like:</span>
<span class="no">Order</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">user_id: </span><span class="mi">1</span><span class="p">).</span><span class="nf">order</span><span class="p">(</span><span class="ss">created_at: :desc</span><span class="p">)</span>
<span class="no">Post</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">user_id: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">status: </span><span class="s1">'published'</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="2-partial-indexes"><span class="me-2">2. Partial Indexes</span><a href="#2-partial-indexes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Index only rows matching specific conditions to reduce index size and improve write performance.</p>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c1"># Index only active users</span>
<span class="n">add_index</span> <span class="ss">:users</span><span class="p">,</span> <span class="ss">:email</span><span class="p">,</span> <span class="ss">unique: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">where: </span><span class="s2">"active = true"</span>

<span class="c1"># Index only published posts</span>
<span class="n">add_index</span> <span class="ss">:posts</span><span class="p">,</span> <span class="ss">:created_at</span><span class="p">,</span> <span class="ss">where: </span><span class="s2">"status = 'published'"</span>

<span class="c1"># Usage - index is used automatically</span>
<span class="no">User</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">active: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">email: </span><span class="s2">"user@example.com"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="3-jsonb-indexes-postgresql"><span class="me-2">3. JSONB Indexes (PostgreSQL)</span><a href="#3-jsonb-indexes-postgresql" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>For applications using JSON data, JSONB indexes dramatically improve query performance.</p>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c1"># GIN index for JSONB columns</span>
<span class="n">add_index</span> <span class="ss">:products</span><span class="p">,</span> <span class="ss">:metadata</span><span class="p">,</span> <span class="ss">using: :gin</span>

<span class="c1"># Expression index for specific JSON keys</span>
<span class="n">add_index</span> <span class="ss">:products</span><span class="p">,</span> <span class="s2">"(metadata-&gt;&gt;'category')"</span><span class="p">,</span> <span class="ss">using: :btree</span>

<span class="c1"># Usage</span>
<span class="no">Product</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="s2">"metadata-&gt;&gt;'category' = ?"</span><span class="p">,</span> <span class="s1">'Electronics'</span><span class="p">)</span>
<span class="no">Product</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="s2">"metadata @&gt; ?"</span><span class="p">,</span> <span class="p">{</span> <span class="ss">brand: </span><span class="s1">'Apple'</span> <span class="p">}.</span><span class="nf">to_json</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="4-covering-indexes"><span class="me-2">4. Covering Indexes</span><a href="#4-covering-indexes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Include all columns needed for a query to avoid table lookups.</p>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="c1"># Covers SELECT id, title WHERE user_id = ? ORDER BY created_at</span>
<span class="n">add_index</span> <span class="ss">:posts</span><span class="p">,</span> <span class="p">[</span><span class="ss">:user_id</span><span class="p">,</span> <span class="ss">:created_at</span><span class="p">],</span> <span class="ss">include: </span><span class="p">[</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:title</span><span class="p">]</span>

<span class="c1"># Query uses index-only scan</span>
<span class="no">Post</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:title</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">user_id: </span><span class="mi">1</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">order</span><span class="p">(</span><span class="ss">:created_at</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="advanced-query-refactoring"><span class="me-2">Advanced Query Refactoring</span><a href="#advanced-query-refactoring" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="1-efficient-subqueries"><span class="me-2">1. Efficient Subqueries</span><a href="#1-efficient-subqueries" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Use subqueries to filter data before expensive operations.</p>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c1"># Instead of joining large tables</span>
<span class="no">User</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:orders</span><span class="p">).</span><span class="nf">where</span><span class="p">(</span><span class="ss">orders: </span><span class="p">{</span> <span class="ss">status: </span><span class="s1">'completed'</span> <span class="p">})</span>

<span class="c1"># Use subquery to pre-filter</span>
<span class="n">completed_orders</span> <span class="o">=</span> <span class="no">Order</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="ss">:user_id</span><span class="p">).</span><span class="nf">where</span><span class="p">(</span><span class="ss">status: </span><span class="s1">'completed'</span><span class="p">)</span>
<span class="no">User</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">id: </span><span class="n">completed_orders</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="2-query-merging-for-dry-code"><span class="me-2">2. Query Merging for DRY Code</span><a href="#2-query-merging-for-dry-code" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Reuse scope logic with <code class="language-plaintext highlighter-rouge">.merge()</code> for maintainable queries.</p>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Comment</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">scope</span> <span class="ss">:approved</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="n">where</span><span class="p">(</span><span class="ss">approved: </span><span class="kp">true</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">scope</span> <span class="ss">:recent</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="n">where</span><span class="p">(</span><span class="s1">'created_at &gt; ?'</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="nf">week</span><span class="p">.</span><span class="nf">ago</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>

<span class="c1"># Instead of duplicating conditions</span>
<span class="no">Post</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:comments</span><span class="p">).</span><span class="nf">where</span><span class="p">(</span><span class="ss">comments: </span><span class="p">{</span> <span class="ss">approved: </span><span class="kp">true</span> <span class="p">})</span>

<span class="c1"># Reuse existing scopes</span>
<span class="no">Post</span><span class="p">.</span><span class="nf">joins</span><span class="p">(</span><span class="ss">:comments</span><span class="p">).</span><span class="nf">merge</span><span class="p">(</span><span class="no">Comment</span><span class="p">.</span><span class="nf">approved</span><span class="p">.</span><span class="nf">recent</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="3-optimized-column-selection"><span class="me-2">3. Optimized Column Selection</span><a href="#3-optimized-column-selection" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Always specify needed columns to reduce memory usage and transfer time.</p>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c1"># Bad - loads all columns</span>
<span class="n">posts</span> <span class="o">=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">published: </span><span class="kp">true</span><span class="p">)</span>
<span class="n">titles</span> <span class="o">=</span> <span class="n">posts</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:title</span><span class="p">)</span>

<span class="c1"># Good - loads only needed data</span>
<span class="n">titles</span> <span class="o">=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">published: </span><span class="kp">true</span><span class="p">).</span><span class="nf">pluck</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span>

<span class="c1"># For multiple columns maintaining objects</span>
<span class="n">posts</span> <span class="o">=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="ss">:id</span><span class="p">,</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">:excerpt</span><span class="p">).</span><span class="nf">where</span><span class="p">(</span><span class="ss">published: </span><span class="kp">true</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="advanced-database-strategies"><span class="me-2">Advanced Database Strategies</span><a href="#advanced-database-strategies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="1-database-views-with-scenic-gem"><span class="me-2">1. Database Views with Scenic Gem</span><a href="#1-database-views-with-scenic-gem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Create reusable complex queries as database views using the Scenic gem.</p>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre><span class="c1"># Gemfile</span>
<span class="n">gem</span> <span class="s1">'scenic'</span>

<span class="c1"># Generate view</span>
<span class="n">rails</span> <span class="n">generate</span> <span class="n">scenic</span><span class="ss">:view</span> <span class="n">active_post_stats</span>

<span class="c1"># db/views/active_post_stats_v01.sql</span>
<span class="no">SELECT</span> <span class="nb">p</span><span class="p">.</span><span class="nf">id</span><span class="p">,</span>
       <span class="nb">p</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span>
       <span class="nb">p</span><span class="p">.</span><span class="nf">user_id</span><span class="p">,</span>
       <span class="no">COUNT</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="nf">id</span><span class="p">)</span> <span class="n">as</span> <span class="n">comments_count</span><span class="p">,</span>
       <span class="no">AVG</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="nf">rating</span><span class="p">)</span> <span class="n">as</span> <span class="n">avg_rating</span>
<span class="no">FROM</span> <span class="n">posts</span> <span class="nb">p</span>
<span class="no">LEFT</span> <span class="no">JOIN</span> <span class="n">comments</span> <span class="n">c</span> <span class="no">ON</span> <span class="n">c</span><span class="p">.</span><span class="nf">post_id</span> <span class="o">=</span> <span class="nb">p</span><span class="p">.</span><span class="nf">id</span>
<span class="no">WHERE</span> <span class="nb">p</span><span class="p">.</span><span class="nf">status</span> <span class="o">=</span> <span class="s1">'published'</span>
<span class="no">GROUP</span> <span class="no">BY</span> <span class="nb">p</span><span class="p">.</span><span class="nf">id</span><span class="p">,</span> <span class="nb">p</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="nb">p</span><span class="p">.</span><span class="nf">user_id</span><span class="p">;</span>

<span class="c1"># Use in Rails</span>
<span class="k">class</span> <span class="nc">ActivePostStat</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="nb">self</span><span class="p">.</span><span class="nf">table_name</span> <span class="o">=</span> <span class="s1">'active_post_stats'</span>
  <span class="c1"># Read-only model</span>
<span class="k">end</span>

<span class="c1"># Query like any model</span>
<span class="n">popular_posts</span> <span class="o">=</span> <span class="no">ActivePostStat</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="s1">'comments_count &gt; 10'</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="2-materialized-views-for-heavy-computations"><span class="me-2">2. Materialized Views for Heavy Computations</span><a href="#2-materialized-views-for-heavy-computations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Store expensive query results physically for better performance.</p>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre><span class="c1"># Create materialized view</span>
<span class="k">class</span> <span class="nc">CreateUserStatsView</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">7.0</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">up</span>
    <span class="n">execute</span> <span class="o">&lt;&lt;-</span><span class="no">SQL</span><span class="sh">
      CREATE MATERIALIZED VIEW user_engagement_stats AS
      SELECT u.id,
             u.name,
             COUNT(DISTINCT p.id) as posts_count,
             COUNT(DISTINCT c.id) as comments_count,
             AVG(p.views_count) as avg_post_views
      FROM users u
      LEFT JOIN posts p ON p.user_id = u.id
      LEFT JOIN comments c ON c.user_id = u.id
      GROUP BY u.id, u.name;
      
      CREATE UNIQUE INDEX ON user_engagement_stats (id);
</span><span class="no">    SQL</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">down</span>
    <span class="n">execute</span> <span class="s2">"DROP MATERIALIZED VIEW user_engagement_stats"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># Refresh periodically (in background job)</span>
<span class="k">class</span> <span class="nc">RefreshStatsJob</span> <span class="o">&lt;</span> <span class="no">ApplicationJob</span>
  <span class="k">def</span> <span class="nf">perform</span>
    <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">connection</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span>
      <span class="s2">"REFRESH MATERIALIZED VIEW user_engagement_stats"</span>
    <span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="2-scopes-for-reusable-query-logic"><span class="me-2">2. Scopes for Reusable Query Logic</span><a href="#2-scopes-for-reusable-query-logic" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Create maintainable, reusable query patterns with scopes.</p>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">scope</span> <span class="ss">:published</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="n">where</span><span class="p">(</span><span class="ss">published: </span><span class="kp">true</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">scope</span> <span class="ss">:recent</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="n">where</span><span class="p">(</span><span class="s1">'created_at &gt; ?'</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="nf">week</span><span class="p">.</span><span class="nf">ago</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">scope</span> <span class="ss">:popular</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="n">where</span><span class="p">(</span><span class="s1">'views_count &gt; ?'</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">scope</span> <span class="ss">:by_author</span><span class="p">,</span> <span class="o">-&gt;</span><span class="p">(</span><span class="n">author</span><span class="p">)</span> <span class="p">{</span> <span class="n">where</span><span class="p">(</span><span class="ss">author: </span><span class="n">author</span><span class="p">)</span> <span class="p">}</span>
  
  <span class="c1"># Chainable scopes</span>
  <span class="n">scope</span> <span class="ss">:trending</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="n">published</span><span class="p">.</span><span class="nf">recent</span><span class="p">.</span><span class="nf">popular</span> <span class="p">}</span>
<span class="k">end</span>

<span class="c1"># Usage</span>
<span class="n">trending_posts</span> <span class="o">=</span> <span class="no">Post</span><span class="p">.</span><span class="nf">trending</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:author</span><span class="p">,</span> <span class="ss">:comments</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="3-raw-sql-for-complex-queries"><span class="me-2">3. Raw SQL for Complex Queries</span><a href="#3-raw-sql-for-complex-queries" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Sometimes raw SQL is more efficient than Active Record.</p>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">AnalyticsQuery</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">user_engagement_stats</span>
    <span class="n">sql</span> <span class="o">=</span> <span class="o">&lt;&lt;-</span><span class="no">SQL</span><span class="sh">
      SELECT 
        DATE_TRUNC('day', created_at) as date,
        COUNT(*) as posts_count,
        COUNT(DISTINCT user_id) as active_users
      FROM posts 
      WHERE created_at &gt;= ? 
      GROUP BY DATE_TRUNC('day', created_at)
      ORDER BY date DESC
</span><span class="no">    SQL</span>
    
    <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">connection</span><span class="p">.</span><span class="nf">exec_query</span><span class="p">(</span>
      <span class="n">sql</span><span class="p">,</span> 
      <span class="s1">'User Engagement Stats'</span><span class="p">,</span> 
      <span class="p">[</span><span class="mi">30</span><span class="p">.</span><span class="nf">days</span><span class="p">.</span><span class="nf">ago</span><span class="p">]</span>
    <span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="query-optimization-checklist"><span class="me-2">Query Optimization Checklist</span><a href="#query-optimization-checklist" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="pre-development-setup"><span class="me-2">Pre-Development Setup</span><a href="#pre-development-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<ul class="task-list">
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Install Bullet gem for N+1 detection</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Set up Prosopite for lightweight query monitoring</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Configure Rack Mini Profiler for development insights</li>
</ul>

<h3 id="code-review-checklist"><span class="me-2">Code Review Checklist</span><a href="#code-review-checklist" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<ul class="task-list">
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Check for N+1 queries - use <code class="language-plaintext highlighter-rouge">.includes</code>, <code class="language-plaintext highlighter-rouge">.preload</code>, or <code class="language-plaintext highlighter-rouge">.eager_load</code></li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Verify selective column loading with <code class="language-plaintext highlighter-rouge">.select</code> or <code class="language-plaintext highlighter-rouge">.pluck</code></li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Add indexes for <code class="language-plaintext highlighter-rouge">WHERE</code>, <code class="language-plaintext highlighter-rouge">JOIN</code>, <code class="language-plaintext highlighter-rouge">ORDER BY</code> columns</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Implement counter caches for association counts</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Use <code class="language-plaintext highlighter-rouge">.find_each</code> for large dataset processing</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Cache expensive queries with appropriate expiration</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Utilize scopes for reusable query logic</li>
</ul>

<h3 id="database-optimization"><span class="me-2">Database Optimization</span><a href="#database-optimization" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<ul class="task-list">
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Add composite indexes for multi-column queries</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Create partial indexes for conditional queries</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Consider JSONB indexes for JSON column queries</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Implement covering indexes for select-heavy queries</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Use database views for complex, repeated queries</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Set up materialized views for expensive aggregations</li>
</ul>

<h3 id="production-monitoring"><span class="me-2">Production Monitoring</span><a href="#production-monitoring" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<ul class="task-list">
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Implement APM tools (ScoutAPM, Skylight, or similar)</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Monitor slow query logs regularly</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Set up database performance alerts</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Track query performance trends over time</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Configure query timeout settings</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Regular EXPLAIN analysis of complex queries</li>
</ul>

<h3 id="performance-testing"><span class="me-2">Performance Testing</span><a href="#performance-testing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<ul class="task-list">
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Benchmark queries with realistic data volumes</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Profile memory usage during peak loads</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Test with production-like database sizes</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Validate caching strategies under load</li>
  <li class="task-list-item"><i class="far fa-circle fa-fw"></i>Measure response times before/after optimizations</li>
</ul>

<h2 id="performance-testing-strategies"><span class="me-2">Performance Testing Strategies</span><a href="#performance-testing-strategies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="benchmarking-queries"><span class="me-2">Benchmarking Queries</span><a href="#benchmarking-queries" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="nb">require</span> <span class="s1">'benchmark'</span>

<span class="k">def</span> <span class="nf">benchmark_query_optimization</span>
  <span class="no">Benchmark</span><span class="p">.</span><span class="nf">bm</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
    <span class="n">x</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="s2">"Without includes:"</span><span class="p">)</span> <span class="k">do</span>
      <span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">limit</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
      <span class="n">users</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="n">user</span><span class="p">.</span><span class="nf">posts</span><span class="p">.</span><span class="nf">count</span> <span class="p">}</span>
    <span class="k">end</span>
    
    <span class="n">x</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="s2">"With includes:"</span><span class="p">)</span> <span class="k">do</span>
      <span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:posts</span><span class="p">).</span><span class="nf">limit</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
      <span class="n">users</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="n">user</span><span class="p">.</span><span class="nf">posts</span><span class="p">.</span><span class="nf">size</span> <span class="p">}</span>
    <span class="k">end</span>
    
    <span class="n">x</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="s2">"With counter cache:"</span><span class="p">)</span> <span class="k">do</span>
      <span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">limit</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
      <span class="n">users</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="n">user</span><span class="p">.</span><span class="nf">posts_count</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="production-like-testing"><span class="me-2">Production-Like Testing</span><a href="#production-like-testing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c1"># Use production database seeds for realistic testing</span>
<span class="k">class</span> <span class="nc">DatabaseSeeder</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">seed_realistic_data</span>
    <span class="no">User</span><span class="p">.</span><span class="nf">create_batch</span><span class="p">(</span><span class="mi">10_000</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="p">,</span> <span class="n">index</span><span class="o">|</span>
      <span class="p">{</span>
        <span class="ss">name: </span><span class="s2">"User </span><span class="si">#{</span><span class="n">index</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
        <span class="ss">email: </span><span class="s2">"user</span><span class="si">#{</span><span class="n">index</span><span class="si">}</span><span class="s2">@example.com"</span><span class="p">,</span>
        <span class="ss">posts_count: </span><span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="mi">50</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="common-anti-patterns-to-avoid"><span class="me-2">Common Anti-Patterns to Avoid</span><a href="#common-anti-patterns-to-avoid" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="1-query-in-loops"><span class="me-2">1. Query in Loops</span><a href="#1-query-in-loops" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c1"># Bad: N+1 queries</span>
<span class="n">users</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="no">User</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">user</span><span class="p">.</span><span class="nf">id</span><span class="p">).</span><span class="nf">name</span> <span class="c1"># Unnecessary query</span>
<span class="k">end</span>

<span class="c1"># Good: Use loaded objects</span>
<span class="n">users</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">user</span><span class="p">.</span><span class="nf">name</span> <span class="c1"># No additional query</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="2-loading-unnecessary-associations"><span class="me-2">2. Loading Unnecessary Associations</span><a href="#2-loading-unnecessary-associations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c1"># Bad: Loads all associations</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:posts</span><span class="p">,</span> <span class="ss">:comments</span><span class="p">,</span> <span class="ss">:profile</span><span class="p">)</span>
<span class="n">users</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">user</span><span class="p">.</span><span class="nf">name</span> <span class="p">}</span> <span class="c1"># Only using name</span>

<span class="c1"># Good: Load only what you need</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="ss">:name</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="3-inefficient-counting"><span class="me-2">3. Inefficient Counting</span><a href="#3-inefficient-counting" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<div class="language-ruby highlighter-rouge"><div class="code-header">
        <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1"># Bad: Loads all records to count</span>
<span class="no">User</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">active: </span><span class="kp">true</span><span class="p">).</span><span class="nf">to_a</span><span class="p">.</span><span class="nf">count</span>

<span class="c1"># Good: Database-level counting</span>
<span class="no">User</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">active: </span><span class="kp">true</span><span class="p">).</span><span class="nf">count</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="conclusion"><span class="me-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Query optimization is an ongoing process that requires understanding your application’s data access patterns, monitoring performance metrics, and applying the right techniques for each scenario. Start with the fundamentals—eliminating N+1 queries, adding strategic indexes, and selecting only necessary data. Then gradually implement advanced techniques like caching, counter caches, and raw SQL optimization where appropriate.</p>

<p>Remember that premature optimization can be counterproductive. Make sure to evaluate the real performance bottlenecks and optimize where it matters most. Regularly monitoring and profiling your Rails application, along with familiarizing yourself with traffic metrics, can help you identify the areas that will provide the greatest performance improvements.</p>

<h2 id="the-key-to-successful-query-optimization-lies-in-continuous-monitoring-testing-and-iterative-improvement-build-performance-considerations-into-your-development-workflow-and-your-rails-applications-will-scale-efficiently-while-providing-excellent-user-experiences"><span class="me-2">The key to successful query optimization lies in continuous monitoring, testing, and iterative improvement. Build performance considerations into your development workflow, and your Rails applications will scale efficiently while providing excellent user experiences.</span><a href="#the-key-to-successful-query-optimization-lies-in-continuous-monitoring-testing-and-iterative-improvement-build-performance-considerations-into-your-development-workflow-and-your-rails-applications-will-scale-efficiently-while-providing-excellent-user-experiences" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6361630351328078" data-ad-slot="4812265796"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/ruby-on-rails/">Ruby on Rails</a>,
          <a href="/categories/performance/">Performance</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/ruby-on-rails/"
            class="post-tag no-text-decoration"
          >ruby on rails</a>
        
          <a
            href="/tags/optimization/"
            class="post-tag no-text-decoration"
          >optimization</a>
        
          <a
            href="/tags/query/"
            class="post-tag no-text-decoration"
          >query</a>
        
          <a
            href="/tags/performance/"
            class="post-tag no-text-decoration"
          >performance</a>
        
          <a
            href="/tags/profiling/"
            class="post-tag no-text-decoration"
          >profiling</a>
        
          <a
            href="/tags/benchmark/"
            class="post-tag no-text-decoration"
          >benchmark</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=Rails%20Query%20Optimization%20guide%20-%20Let's%20code&url=http%3A%2F%2Fshivrajbadu.com.np%2Fposts%2Frails-query-optimization-guide%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=Rails%20Query%20Optimization%20guide%20-%20Let's%20code&u=http%3A%2F%2Fshivrajbadu.com.np%2Fposts%2Frails-query-optimization-guide%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=http%3A%2F%2Fshivrajbadu.com.np%2Fposts%2Frails-query-optimization-guide%2F&text=Rails%20Query%20Optimization%20guide%20-%20Let's%20code" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

      

      <a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Fshivrajbadu.com.np%2Fposts%2Frails-query-optimization-guide%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin">
        <i class="fa-fw fab fa-linkedin"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get the last 5 posts from lastmod list. -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/simplifying-ai-integration-ruby-llm-gem-guide/">Simplifying AI Integration in Ruby: Exploring the ruby_llm Gem</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/building-modern-rails-apps-2025-ecosystem/">Building Modern Rails Apps in 2025: Evolving with the Rails 8 Ecosystem</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/amazon_sagemaker_foundation_model_deploy_and_scale/">Deploy & Scale AI Models with Amazon SageMaker: A Comprehensive Guide</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/pg-query-plan-visualize/">Query Optimization with PostgreSQL Execution Plan Visualizer</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/gemini-cli-with-git-mcp-integration/">Gemini CLI with MCP Integration: AI Powered Terminal Coding Assistant and AI Development Workflow</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ruby-on-rails/">ruby on rails</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ai/">AI</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/css/">css</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/tailwind-css/">tailwind_css</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ui/">UI</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/performance/">performance</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ai/">ai</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/elastic-search/">elastic_search</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="ps-0 pe-4">
    <h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->














  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/memory-profiler-for-performance-optimization/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1742452740"
  data-df="ll"
  
>
  Mar 20, 2025
</time>

              <h4 class="pt-0 my-2">Mastering Ruby Memory Management: A Practical Guide to Profiling and Optimization</h4>
              <div class="text-muted">
                <p>
                  





                  Memory usage is often the silent performance killer in Ruby applications. While we frequently focus on execution speed, memory consumption can cause slowdowns, unexpected crashes, and increased hos...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/postgresql-optimization-prevent-performance-bottleneck/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1742412370"
  data-df="ll"
  
>
  Mar 20, 2025
</time>

              <h4 class="pt-0 my-2">Mastering PostgreSQL Performance: Proactive Practices to Prevent Bottlenecks</h4>
              <div class="text-muted">
                <p>
                  





                  Database performance is often the silent killer of application responsiveness. As your PostgreSQL database grows with your business, seemingly innocent operations can lead to significant performanc...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/rails-benchmarking/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1742440090"
  data-df="ll"
  
>
  Mar 20, 2025
</time>

              <h4 class="pt-0 my-2">Mastering Rails Performance Benchmarking: A Developer's Guide</h4>
              <div class="text-muted">
                <p>
                  





                  In the world of Rails application development, performance isn’t just a nice-to-have—it’s essential. As applications grow in complexity and user base, even small inefficiencies can compound into si...
                </p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/building-modern-rails-apps-2025-ecosystem/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>Building Modern Rails Apps in 2025: Evolving with the Rails 8 Ecosystem</p>
    </a>
  

  
    <a
      href="/posts/simplifying-ai-integration-ruby-llm-gem-guide/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>Simplifying AI Integration in Ruby: Exploring the ruby_llm Gem</p>
    </a>
  
</nav>

            
              
              <!--  The comments switcher -->


            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>
    ©
    <time>2025</time>
    <a href="https://twitter.com/shivrajbadu">Shivraj Badu</a>.
    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ruby-on-rails/">ruby on rails</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ai/">AI</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/css/">css</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/tailwind-css/">tailwind_css</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ui/">UI</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/performance/">performance</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ai/">ai</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/elastic-search/">elastic_search</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->

    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.21.3/dist/tocbot.min.js"></script>






<script defer src="/assets/js/dist/post.min.js"></script>






    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  /* Note: dependent library will be loaded in `js-selector.html` */
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5"></p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

